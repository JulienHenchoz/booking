{"version":3,"sources":["withState.ts"],"names":[],"mappings":";;;;;;;;AAAA,OAAO,EAAc,aAAa,EAAE,aAAa,EAAE,MAAM,aAAa,CAAC;AAEvE,OAAO,YAAY,MAAM,sBAAsB,CAAC;AAgBhD,MAAM,oBACJ,SAAqB,EACrB,WAAuB,EACvB,YAAuD;IAEvD,MAAM,CAAC;QACL,iBAAiB,EAAE;YACjB,IAAI,MAAW,CAAC;YAChB,IAAI,IAAS,CAAC;YACd,MAAM,CAAC;gBACL,aAAa,CAAC,UAAC,SAAS,EAAE,KAAK;oBAC7B,IAAM,QAAQ,GAAG,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,YAAY,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC,CAAC;oBACjF,MAAM,GAAG,QAAQ,CAAC,OAAO,CAAC;oBAC1B,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;gBACvB,CAAC,CAAC;gBACF,aAAa,CAAC,UAAC,KAAK,EAAE,KAAK;oBAAK,OAAA,cAC3B,KAAK,eACP,SAAmB,IAAG,KAAK,CAAC,IAAI,CAAC,KACjC,WAAqB,IAAG,MAAM,OAC/B;;gBAJ8B,CAI9B,CAAC;aACJ,CAAC;QACJ,CAAC;KACF,CAAC;AACJ,CAAC;AAED,eAAe,SAAS,CAAC","file":"withState.js","sourcesContent":["import { Composable, stateCallback, propsCallback } from \"./blueprint\";\nimport { Mapper } from \"./types\";\nimport resolveValue from \"./utils/resolveValue\";\n\n// TODO: typings without TPropsIn.\n\nexport function withState(\n  stateName: string | symbol,\n  updaterName: string | symbol,\n  initialValue: Object | Mapper<any, any>,\n): Composable;\n\nexport function withState<TPropsIn, TPropNames extends string | symbol, TPropValue>(\n  stateName: TPropNames,\n  updaterName: TPropNames,\n  initialValue: TPropValue | Mapper<TPropsIn, TPropValue>,\n): Composable;\n\nexport function withState<TPropsIn, TPropNames extends string | symbol, TPropValue>(\n  stateName: TPropNames,\n  updaterName: TPropNames,\n  initialValue: TPropValue | Mapper<TPropsIn, TPropValue>,\n): Composable {\n  return {\n    instanceCallbacks: () => {\n      let update: any;\n      let name: any;\n      return [\n        stateCallback((initState, props) => {\n          const newState = initState(String(stateName), resolveValue(initialValue, props));\n          update = newState.updater;\n          name = newState.name;\n        }),\n        propsCallback((props, state) => ({\n          ...props,\n          [stateName as string]: state[name],\n          [updaterName as string]: update,\n        })),\n      ];\n    },\n  };\n}\n\nexport default withState;\n"]}